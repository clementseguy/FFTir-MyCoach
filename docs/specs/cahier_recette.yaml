version: v0.4
last_updated: 2025-10-07
features:
  - id: SESS-01
    name: Sessions – création/édition
    objectif: Créer une session réalisée avec armes/séries, puis l’éditer sans perte de données.
    preconditions:
      - Application installée
      - Aucune session obligatoire
    steps:
      - Ouvrir l’app et aller sur “+” → “Nouvelle session (réalisée)”
      - Renseigner arme, calibre, prise, au moins 1 série (coups, distance, points, groupement)
      - Enregistrer la session
      - Ouvrir la session et modifier un champ (ex: commentaire)
      - Enregistrer à nouveau
    expected:
      - La session apparaît dans l’historique réalisée
      - Les champs saisis sont persistés fidèlement
      - La modification est bien visible après réouverture

  - id: SESS-02
    name: Sessions prévues (planification) + conversion wizard
    objectif: Planifier une session, puis la convertir en réalisée via l’assistant.
    steps:
      - Depuis un exercice, planifier une session prévue
      - Vérifier l’icône “prévue” et la présence dans la liste dédiée
      - Lancer la conversion (wizard), compléter séries et synthèse
      - Valider la conversion
    expected:
      - La session disparaît des “prévues” et figure dans les sessions réalisées
      - Les séries saisies via le wizard sont bien persistées

  - id: DASH-01
    name: Tableau de bord – statistiques récap
    objectif: Afficher les statistiques macro et les dernières tendances.
    steps:
      - Créer/ajouter une session avec au moins 1 série
      - Ouvrir l’accueil/Tableau de bord (onglet Synthèse)
      - Vérifier l’affichage des indicateurs (réalisés total, 7/30/60/90j) et cartes récap
    expected:
      - Les valeurs sont cohérentes avec les sessions existantes

  - id: DASH-02
    name: Tableau de bord – statistiques avancées
    objectif: Vérifier la mise à jour des statistiques dans l’onglet Avancé.
    steps:
      - Créer/ajouter une session avec au moins 1 série
      - Ouvrir le Tableau de bord (onglet Avancé)
    expected:
      - Les statistiques et graphes sont mis à jour avec la nouvelle session

  - id: GOAL-01
    name: Objectifs – création/édition et listing
    objectif: Créer un objectif, vérifier son affichage et sa progression.
    steps:
      - Créer un objectif (nom, période, métriques)
      - Vérifier la présence dans le listing et la carte “Top”
      - Modifier l’objectif et enregistrer
    expected:
      - L’objectif est visible avec ses informations correctes
      - La modification est persistée

  - id: EX-01
    name: Exercices – création et association aux sessions
    objectif: Créer un exercice et l’associer à une session.
    steps:
      - Créer un exercice (nom, catégorie, type, durée, matériel, consignes)
      - Depuis l’exercice, planifier puis convertir une session (cf. SESS-02)
    expected:
      - L’exercice apparaît dans la liste et l’association session ↔ exercice est visible

  - id: EX-02
    name: Exercices – session prévue depuis un exercice d’entraînement
    objectif: Vérifier que le nombre de séries prévues correspond au nombre de consignes.
    steps:
      - Créer un exercice de type "entraînement" avec 3 consignes
      - Transformer cet exercice en session prévue
    expected:
      - La session prévue est créée avec un nombre de séries égal au nombre de consignes (3)

  - id: CAL-01
    name: Calibres – autocomplétion + préférence par défaut
    objectif: Saisie de calibre assistée et préremplie si préférence définie.
    steps:
      - Ouvrir création de session, focus sur calibre → voir liste complète
      - Taper un alias (ex: 9mm) et sélectionner une option
    expected:
      - La liste s’affiche au focus
      - La sélection remplit le champ correctement

  - id: CAL-02
    name: Calibres – préférence par défaut
    objectif: Préremplir le champ calibre depuis la préférence utilisateur.
    steps:
      - Aller dans Préférences et sélectionner un calibre par défaut
      - Créer une nouvelle session
    expected:
      - Le champ calibre est prérempli avec le calibre par défaut

  - id: PREF-01
    name: Réglages – préférences utilisateur (Hive)
    objectif: Tester la préférence "1 main / 2 mains" et son effet de préremplissage.
    steps:
      - Ouvrir l’écran Réglages et régler la préférence de prise d’arme (1 main / 2 mains)
      - Créer une nouvelle session et vérifier le préremplissage de la prise
    expected:
      - La préférence est persistée et appliquée au formulaire de session

  - id: PREF-02
    name: Réglages – préférence calibre
    objectif: Tester la préférence de calibre (saisie assistée + persistance).
    steps:
      - Ouvrir l’écran Réglages et modifier la préférence de calibre (autocomplétion: la liste apparaît lors de la saisie)
      - Sauvegarder, puis rouvrir les préférences pour vérifier la persistance
    expected:
      - La liste de calibres apparaît bien lors de la saisie et la valeur choisie est persistée

  - id: EXP-01
    name: Export sessions
    objectif: Exporter les sessions et vérifier le fichier généré.
    steps:
      - Ouvrir le module d’export, choisir un dossier
      - Lancer l’export
    expected:
      - Un fichier est généré dans le dossier choisi

  - id: SEC-01
    name: Règles de sécurité (dashboard)
    objectif: Afficher le bloc de règles FFTir et vérifier sa lisibilité.
    steps:
      - Ouvrir l’accueil/Tableau de bord
      - Vérifier la section “Règles de sécurité”
    expected:
      - Le contenu est à jour et lisible (révision FFTir 2024)
