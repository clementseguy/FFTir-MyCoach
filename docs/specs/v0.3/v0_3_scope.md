# NexTarget v0.3.0 ‚Äì Scope & Planning

---
Mise √† jour (03/10/2025)

R√©sum√© ex√©cution v0.3.0:
- Objectif central r√©alis√©: introduction des Exercices r√©utilisables + int√©gration directe dans la cr√©ation / planification de sessions.
- Accent mis sur une fonctionnalit√© non explicitement pr√©vue dans le scope initial: Sessions planifi√©es + conversion guid√©e (wizard) en sessions r√©alis√©es.
- Extension Objectifs (Lots A‚ÜíD) livr√©e: Top3 + compteurs, stats macro, multi-carte, formulaire s√©par√©, aide tendance. (Les enrichissements structurels pr√©vus initialement: type, statut √©tendu, historique ‚Üí toujours non livr√©s.)
- Plusieurs √©l√©ments du scope initial restent non livr√©s (objectifs enrichis structur√©s, stats 1M/2M, saisie plein √©cran) et sont report√©s.
 - Stabilisation ¬´ Tableau de bord ¬ª (ex‚ÄëAccueil) livr√©e: filtrage central des sessions r√©alis√©es, tri chronologique strict des s√©ries (ASC), titres centr√©s, renommage, et harmonisation des graphes (points, groupement, scatter) affichant d√©sormais les 30 derni√®res s√©ries. Modes Scatter alternatifs outill√©s (cap/downsampling) disponibles pour it√©rations futures.

L√©gende statut utilis√©e ci-dessous:
- ‚úÖ R√©alis√©
- üü° Partiellement r√©alis√©
- ‚è© Report√© / Non livr√© en 0.3.0
- ‚ûï Ajout hors scope initial
---

Date de cr√©ation: 2025-09-28
Branche cible: `dev`
Objectif cible: Release v0.3.0 (it√©ration fonctionnelle majeure apr√®s 0.2.0)

## üéØ Objectifs principaux
1. Gestion des Exercices ‚Äì ‚úÖ (fondations livr√©es : mod√®le, UI liste/√©dition, planification, ic√¥nes, filtres/tri, cartes stats). Restant (report√© v0.4+) : usageCount / lastPerformedAt, tags libres, recommandations crois√©es.
3. Am√©lioration UI de saisie des S√©ries ‚Äì ‚úÖ (objectif v0.3 consid√©r√© atteint via wizard planifi√©e‚Üír√©alis√©e + validations; plein √©cran & navigation directe hors scope restant)
4. Am√©liorations mineures ‚Äì üü° (micro UX & pr√©f√©rences livr√©es; calibres harmonis√©s livr√©s; harmonisation r√©seau report√©e)
5. √âvolutions statistiques (1M / 2M) ‚Äì ‚è© (non livr√©)

‚ûï Ajout majeur hors liste initiale: Sessions planifi√©es + conversion guid√©e.

## 1. Gestion des Exercices
### Description
Introduire une entit√© "Exercice" distincte des sessions, permettant de d√©finir un type de travail (ex: pr√©cision 10m, cadence, groupement contr√¥l√©, vis√©e). Les exercices pourront √™tre r√©utilis√©s dans diff√©rentes sessions.

Statut global: üü° (fondations livr√©es; cat√©gories / param√®tres typ√©s / multi-exercices dans une session √† compl√©ter)

Livr√©:
- ‚úÖ Mod√®le Exercise (id, nom, description, consignes, association objectifs)
- ‚úÖ Association Session -> Exercise (sessions planifi√©es cr√©√©es √† partir d‚Äôun exercice, r√©f√©rence persist√©e)
- ‚úÖ Cr√©ation / √©dition / suppression basiques + consignes multi-√©tapes utilis√©es pour auto-g√©n√©rer les s√©ries planifi√©es
- ‚úÖ Lien Exercise -> Objectifs (s√©lection multiple)

### Besoins
- Mod√®le `Exercise` (id, nom, description courte, cat√©gorie, param√®tres optionnels selon type)
- Association Session -> Liste d'exercices utilis√©s (ordre)
- Association Exercice -> Objectifs

### D√©tails fonctionnels
- Cr√©ation / √©dition / suppression
- Cat√©gories (ex: Pr√©cision, Cadence, Stabilit√©, Respiration)

### UI/UX
- Nouvelle section "Exercices" (liste + bouton + d√©tail)

Statut:
- ‚úÖ Section Exercices (liste + d√©tail + cr√©ation) livr√©e

### Donn√©es / stockage
- Migration locale (ajout table/collection). Conserver compat 0.2.x

Statut:
- ‚úÖ Ajout box Hive + compat ascendante (aucune rupture 0.2.x)
- üü° Pas encore de syst√®me de migrations g√©n√©ralis√© type MigrationRunner (pr√©vu mais non finalis√© en 0.3)

### Risques
- Explosion des variantes (limiter les types au d√©part)

## 2. Suivi am√©lior√© des Objectifs
### Objectifs
Rendre les objectifs plus actionnables et mesurables.

### Actions pr√©vues
- Ajout d‚Äôun champ "type" (ex: score global, moyenne s√©rie, volume, r√©gularit√©)
- Ajout d‚Äôune date cible ou p√©riode
- Statut enrichi: `planned`, `in_progress`, `achieved`, `abandoned`
- Historisation: journal des changements de statut

Statut: üü° Partiellement livr√© (Lots A-D apportent visibilit√© & tendance) / Non livr√© pour: type objectif, statut enrichi, historique, date cible.

### UI
- Vue liste tri√©e par priorit√© & statut
- D√©tail objectif: progression + historique

### Calcul progression
- Bas√© sur m√©trique sous-jacente (ex: moyenne points 30j / objectif num√©rique)

## 3. Am√©lioration UI des S√©ries
### Probl√®mes actuels
- Saisie potentiellement lente en conditions r√©elles
- Peu de retours imm√©diats sur qualit√©

### Am√©liorations
- Mode plein √©cran de saisie rapide
- Validation instantan√©e (score cumul, moyenne s√©rie en cours)
- Passage d‚Äôune s√©rie √† l‚Äôautre optimis√© (swipe / raccourci)

Statut global: ‚úÖ (cible v0.3 atteinte avec alternative wizard; √©l√©ments avanc√©s restants hors scope v0.3)

Livr√© (diff√©rent du scope exact mais r√©pond partiellement √† l‚Äôintention):
- ‚úÖ Wizard de conversion session planifi√©e ‚Üí r√©alis√©e avec progression multi-√©tapes
- ‚úÖ Champs obligatoires & validations strictes (distance, coups, score, groupement, commentaire)
- ‚úÖ Inheritance automatis√©e des valeurs Distance / Coups / Prise entre s√©ries
- ‚úÖ S√©lecteur de prise (1M / 2M) avec pr√©f√©rence utilisateur

Non livr√©:
- ‚è© Mode plein √©cran d√©di√©
- ‚è© Navigation entre s√©ries
- ‚è© Feedback temps r√©el (moyenne cumul√©e) hors synth√®se finale

### Bonus (optionnel)
- Affichage groupement estim√© simplifi√© (si donn√©es dispo)

Statut: ‚è© Non impl√©ment√©.

## 4. Am√©liorations mineures
### Liste initiale
- Gestion des calibres: normaliser et proposer liste d√©roulante fr√©quente
- Pr√©servation dernier calibre utilis√©
- Harmonisation messages d‚Äôerreur r√©seau
- Ajustements visuels (espacements, contrastes)
- Nettoyage code legacy (widgets dupliqu√©s)

Statut global: üü° (reste: dernier calibre, harmonisation r√©seau)

Livr√© partiellement:
- ‚úÖ Ajustements visuels cibl√©s (cartes sessions planifi√©es diff√©renci√©es, couleurs filtres)
- ‚úÖ Pr√©f√©rences utilisateur (prise par d√©faut) ajout√©es
- ‚úÖ Nettoyages ponctuels autour des √©crans wizard / FAB

Non livr√© / partiel:
- ‚è© Pr√©servation dernier calibre (non appliqu√©)
- ‚è© Harmonisation messages r√©seau (report√©)

### Tableau de bord ‚Äì Stats (livr√© v0.3)
- ‚úÖ Renommage ¬´ Accueil ¬ª ‚Üí ¬´ Tableau de bord ¬ª et titres centr√©s sur les composants
- ‚úÖ Filtrage central des sessions: exclusion syst√©matique du statut `pr√©vue` dans tous les calculs stats
- ‚úÖ Tri chronologique strict des s√©ries (date session puis ordre intra‚Äësession)
- ‚úÖ Graphes ¬´ √âvolution points ¬ª et ¬´ √âvolution groupement ¬ª: affichent les 30 derni√®res s√©ries (ancien ‚Üí r√©cent)
- ‚úÖ Graphe ¬´ Corr√©lation Points/Groupement ¬ª (scatter): affiche les 30 derni√®res s√©ries
- ‚úÖ Retrait de la section obsol√®te ¬´ Mes derni√®res sessions ¬ª
- üß© Modes Scatter alternatifs (fen√™tre 30j cap / adaptatif + downsampling stride) outill√©s pour une activation ult√©rieure si souhait√© (par d√©faut: 30 derni√®res s√©ries)

## 5. Stats & Performances (1M / 2M)
### Contexte
Ajout d‚Äôindicateurs de tendance courte/moyenne: 1 mois, 2 mois.

### D√©tails
- Calcul moyennes glissantes 7j / 1 mois / 2 mois
- Comparaison delta (progression + / -)
- Ajout d‚Äôun mini graphe tendance (sparkline) sur page stats

Statut: ‚è© Non livr√© en v0.3.0 (indicateurs 1M/2M et sparkline restant √† impl√©menter; actuelle couverture = 7j & 30j partielle via objectifs)

### Extension future
- Persistance des stats agr√©g√©es (cache) pour acc√©l√©rer l‚Äôouverture

Statut: ‚è© Report√©.

## 6. Non-objectifs (pour √©viter le scope creep)
- Pas d‚Äôauthentification / multi-device encore
- Pas d‚ÄôIA coach avanc√©e suppl√©mentaire (outre existant)
- Pas d‚Äôexport PDF avanc√©

## 7. Techniques / Architecture
- Rester sur Hive comme store principal (pas de bascule SQLite)
- Introduire repository Exercise (abstraction au cas o√π future persistence)
- Ajouter tests unitaires sur service stats & cr√©ation exercices
- Refactor si n√©cessaire: s√©paration `models/` vs `services/` plus stricte
- V√©rifier impact taille base locale (compaction p√©riodique si besoin)
- Infrastructure de migrations Hive standardis√©e (`MigrationRunner` + version store)

Statut:
- ‚úÖ Hive conserv√©
- ‚úÖ Repository / service Exercise impl√©ment√© (niveau basique)
- ‚úÖ Tests autour de la conversion planifi√©e ‚Üí r√©alis√©e (service sessions) ajout√©s
- ‚úÖ Tests stats ajout√©s (filtres statut, ordre des s√©ries, progression/consistency edge cases, pipeline ¬´ derni√®res N s√©ries ¬ª, s√©lection/downsampling Scatter)
- üü° Refactor structure partiel (pas de refonte compl√®te models/services)
- ‚è© Infrastructure de migrations standardis√©e non finalis√©e

## 8. Migration & Compatibilit√©
- Strat√©gie d'√©volution Hive: nouvelle box ou extension sch√©ma serialis√© (compat ascendante)
- Pr√©voir un utilitaire de mise √† niveau (lecture anciennes entr√©es -> r√©√©criture normalis√©e)
- Strat√©gie fallback si corruption: log + nettoyage box + notification utilisateur
 - v2: ajout cl√© `exercises: []` + normalisation cat√©gorie (appliqu√©e au d√©marrage)

Statut:
- ‚úÖ Compat ascendante pr√©serv√©e
- üü° Pas d‚Äôutilitaire g√©n√©rique de mise √† niveau (logiciel minimaliste seulement)
- ‚è© Fallback corruption & strat√©gie nettoyage non impl√©ment√©s
- üü° Ajout structure exercises OK, normalisation cat√©gories pas en place

## 9. Suivi / Kanban interne (suggestion)
Colonnes: Backlog | En cours | Test | Fini (0.3 scope)

## 10. Crit√®res de sortie (Definition of Done v0.3.0)
- Tous les modules ci-dessus impl√©ment√©s (min. sans bonus optionnels marqu√©s)
- Pas de r√©gression sur fonctionnalit√©s 0.2.0 (tests manuels de base)
- Changelog mis √† jour avec section 0.3.0
- Build release test√©e sur appareil r√©el

R√©alit√© v0.3.0 (√©tat interm√©diaire continu√©):
- üü° Modules: partiellement (Objectifs structure avanc√©e & Stats 1M/2M non livr√©s; extension visibilit√©/tendance livr√©e)
- ‚úÖ Exercices: socle complet livr√© (EX1‚ÄìEX17); approfondissements replanifi√©s.
- ‚úÖ Pas de r√©gression majeure observ√©e (tests cibl√©s & sc√©narios wizard)
- ‚úÖ Changelog 0.3.0 enrichi (Objectifs Lots A-D & Exercices EX1‚ÄìEX17)
- ‚úÖ Build: APK release g√©n√©r√©e et test√©e sur appareil

## 11. Versioning
- Incr√©ment: `pubspec.yaml` passera √† `0.3.0` lors de la phase de stabilisation (pr√©-release) avant tag.

Statut: ‚úÖ Version bump effectu√© (pubspec 0.3.0). Tag git √† cr√©er (non encore pouss√© au moment de la r√©daction).

## 12. Changelog (pr√©-cr√©ation entr√©e)
Ajout d‚Äôune section Unreleased dans `CHANGELOG.md` pour pr√©parer l‚Äôagr√©gation.

---
Document vivant ‚Äì mettre √† jour au fur et √† mesure.

---
## Synth√®se livraisons hors scope initial (v0.3.0)
‚ûï Sessions planifi√©es (statut ¬´¬†pr√©vue¬†¬ª, filtrage, diff√©renciation visuelle)
‚ûï Wizard de conversion planifi√©e ‚Üí r√©alis√©e (multi-√©tapes, validations, synth√®se finale)
‚ûï Auto-g√©n√©ration de s√©ries √† partir des consignes d‚Äôun exercice
‚ûï FAB avec appui long / clic droit pour cr√©er une session planifi√©e
‚ûï H√©ritage intelligent Distance / Coups / Prise entre s√©ries
‚ûï Stockage pr√©f√©rence utilisateur pour la prise (1M / 2M)
‚ûï Validation stricte des champs s√©rie + messages d‚Äôerreur coh√©rents
‚ûï Synth√®se auto pr√©-remplie (¬´¬†Session cr√©√©e √† partir de ‚Ä¶¬†¬ª)

## √âl√©ments report√©s (candidats v0.4+)
- Objectifs enrichis (type, statut √©tendu, historique)
- Statistiques 30j / 60j + sparkline
- Filtrage sessions par exercice dans l‚Äôhistorique
- Cat√©gories & tags d‚Äôexercices
- Normalisation calibres + dernier calibre
- Infrastructure de migrations standardis√©e / fallback corruption

---
Fin de mise √† jour post-release v0.3.0.

### Note de progression
Bien que les fondations Exercices soient marqu√©es ‚úÖ, certains incr√©ments restent √† livrer avant cl√¥ture formelle totale de la version (objectif enrichi, stats profondes, normalisation calibres). Le statut global reste donc "version en stabilisation" jusqu'√† int√©gration des derniers correctifs mineurs ou d√©cision de bascule vers v0.4.
